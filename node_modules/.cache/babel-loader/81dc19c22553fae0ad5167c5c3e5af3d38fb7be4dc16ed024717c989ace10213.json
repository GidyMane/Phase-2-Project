{"ast":null,"code":"var _jsxFileName = \"/home/njoki/Documents/Quick-Buy-Now/src/components/register.js\",\n  _s = $RefreshSig$();\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { useEffect, useState } from \"react\";\nimport registerValidator from \"./validations/registerValidator\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Register() {\n  _s();\n  const [formData, setFormData] = useState({});\n  const [errors, setErrors] = useState({});\n  const [users, setUsers] = useState();\n  const navigate = useNavigate();\n  useEffect(() => {\n    fetch(\"https://quick-buy-now-db.vercel.app/users\").then(res => res.json()).then(data => setUsers(data)).catch(e => console.log(e));\n  }, []);\n  function handleInput(e) {\n    let name = e.target.name;\n    let value = e.target.value;\n    let data = {\n      ...formData,\n      [name]: value\n    };\n    setFormData(data);\n  }\n  function getUser(data, email) {\n    console.log(data, email);\n    let user = data.filter(user => user.email === email);\n    console.log(user.length);\n    if (user.length > 0) {\n      return true;\n    }\n    return false;\n  }\n  const handleSubmit = e => {\n    e.preventDefault();\n    if (!getUser(users, formData.email)) {\n      postUser(formData).then(data => {\n        console.log(data);\n        navigate(\"/login\");\n      }).catch(e => console.log(e));\n    }\n    e.target.reset();\n    setErrors({\n      \"data\": \"user exists\"\n    });\n  };\n\n  // setErrors(registerValidator(formData))\n\n  const postUser = async receivedFormData => {\n    let options = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        accept: \"application/json\"\n      },\n      body: JSON.stringify(receivedFormData)\n    };\n    let response = await fetch(\"http://localhost:4000/users\", options);\n    if (response.status !== 201) {\n      throw new Error(\"data passed is invalid\");\n    }\n    let data = await response.json();\n    return data;\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"d-flex justify-content-center align-items-center bg-secondary vh-100\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white p-3 rounded w-25\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Sign up\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"name\",\n            style: {\n              fontSize: \"1.2rem\"\n            },\n            children: /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 79\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            onChange: handleInput,\n            type: \"text\",\n            placeholder: \"Enter name\",\n            className: \"form-control rounded-0\",\n            name: \"name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"email\",\n            style: {\n              fontSize: \"1.2rem\"\n            },\n            children: /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Email\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 80\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            onChange: handleInput,\n            type: \"email\",\n            placeholder: \"Enter email\",\n            className: \"form-control rounded-0\",\n            name: \"email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"password\",\n            style: {\n              fontSize: \"1.2rem\"\n            },\n            children: /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Password\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 83\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            onChange: handleInput,\n            type: \"password\",\n            placeholder: \"Enter password\",\n            className: \"form-control rounded-0\",\n            name: \"password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-success w-100\",\n          children: /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Sign Up\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 67\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 25\n        }, this), errors.data && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-danger\",\n          children: errors.data\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 41\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"You agree to the terms and conditions\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/login\",\n          className: \"btn btn-default-border bg-secondary w-100\",\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 17\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 13\n  }, this);\n}\n_s(Register, \"s63MQyac+s4RaPn4nRks1v7DFEA=\", false, function () {\n  return [useNavigate];\n});\n_c = Register;\nexport default Register;\nvar _c;\n$RefreshReg$(_c, \"Register\");","map":{"version":3,"names":["Link","useNavigate","useEffect","useState","registerValidator","jsxDEV","_jsxDEV","Register","_s","formData","setFormData","errors","setErrors","users","setUsers","navigate","fetch","then","res","json","data","catch","e","console","log","handleInput","name","target","value","getUser","email","user","filter","length","handleSubmit","preventDefault","postUser","reset","receivedFormData","options","method","headers","accept","body","JSON","stringify","response","status","Error","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","htmlFor","style","fontSize","onChange","type","placeholder","to","_c","$RefreshReg$"],"sources":["/home/njoki/Documents/Quick-Buy-Now/src/components/register.js"],"sourcesContent":["import { Link, useNavigate } from \"react-router-dom\";\nimport { useEffect, useState } from \"react\"\nimport registerValidator from \"./validations/registerValidator\";\n\nfunction Register(){\n    const[ formData, setFormData]=useState({})\n    const[errors, setErrors]=useState({})\n    const[users, setUsers] = useState()\n    const navigate=useNavigate()\n\n    useEffect(()=>{\n        fetch(\"https://quick-buy-now-db.vercel.app/users\")\n        .then(res=>res.json())\n        .then(data=> setUsers(data))\n        .catch(e=>console.log(e))\n    }, [])\n\n\n    function handleInput(e){\n        let name= e.target.name\n        let value= e.target.value\n        let data ={\n            ...formData,\n            [name]: value\n        }\n        setFormData(data)\n    }\n\n    function getUser(data, email){\n        console.log(data, email)\n        let user=data.filter(user=> user.email === email)\n        console.log(user.length)\n        if(user.length > 0 ){\n            return true\n        }\n        return false\n    }\n\n    const handleSubmit=(e)=>{\n        e.preventDefault()\n        if(!getUser(users, formData.email)){\n            postUser(formData)\n            .then(data=>{\n            console.log(data)\n            navigate(\"/login\")\n            })\n            .catch(e=>console.log(e))\n        }\n        e.target.reset()\n        setErrors({\"data\" : \"user exists\"})\n        }\n\n        // setErrors(registerValidator(formData))\n    \n\n    const postUser=async (receivedFormData)=>{\n        let options={\n            method:\"POST\",\n            headers:{\n                \"Content-Type\":\"application/json\",\n                accept:\"application/json\"\n            },\n            body:JSON.stringify(receivedFormData)\n        }\n        let response= await fetch(\"http://localhost:4000/users\", options)\n        if (response.status !== 201){\n            throw new Error(\"data passed is invalid\")\n        }\n        let data = await response.json()\n        return data\n    }\n    return(\n            <div className=\"d-flex justify-content-center align-items-center bg-secondary vh-100\" >\n                <div className=\"bg-white p-3 rounded w-25\">\n                    <h2>Sign up</h2>\n                    <form onSubmit={handleSubmit}>\n                    <div className=\"mb-3\">\n                            <label htmlFor=\"name\" style={{fontSize:\"1.2rem\"}}><strong>Name</strong></label>\n                            <input  onChange={handleInput} type=\"text\" placeholder=\"Enter name\" className=\"form-control rounded-0\" name=\"name\"/>\n                            {/* {errors.name && <span className=\"text-danger\">{errors.name}</span>} */}\n                        </div>\n                        <div className=\"mb-3\">\n                            <label htmlFor=\"email\" style={{fontSize:\"1.2rem\"}}><strong>Email</strong></label>\n                            <input onChange={handleInput}  type=\"email\" placeholder=\"Enter email\" className=\"form-control rounded-0\" name=\"email\"/>\n                            {/* {errors.email && <span className=\"text-danger\">{errors.email}</span>} */}\n                        </div>\n                        <div className=\"mb-3\">\n                            <label htmlFor=\"password\" style={{fontSize:\"1.2rem\"}}><strong>Password</strong></label>\n                            <input onChange={handleInput}  type=\"password\" placeholder=\"Enter password\" className=\"form-control rounded-0\" name=\"password\"/>\n                            {/* {errors.password && <span className=\"text-danger\">{errors.password}</span>} */}\n                        </div>\n                        <button className=\"btn btn-success w-100\"><strong>Sign Up</strong></button>\n                        {errors.data && <span className=\"text-danger\">{errors.data}</span>}\n                        <p>You agree to the terms and conditions</p>\n                        <Link  to=\"/login\" className=\"btn btn-default-border bg-secondary w-100\">Login</Link>\n                    </form>\n                </div>\n            </div>\n         )\n}\n\n\nexport default Register;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}